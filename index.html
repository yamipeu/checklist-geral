<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Protocolos VirteX - Premium</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="icon.png">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root {
    --primary: #e11d2e; /* Vermelho VirteX */
    --gold: #c5a365;    /* Dourado Premium */
    --bg: #050505;      /* Preto profundo */
    --panel: #121212;   /* Card escuro */
    --text: #ffffff;
    --muted: #a0a0a0;
    --border: #222222;
}

.dark {
    /* Mantido para compatibilidade, mas o padr√£o agora √© dark */
    --bg: #050505;
    --panel: #121212;
}

* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: var(--bg);
    color: var(--text);
    background-image: radial-gradient(circle at top right, #1a0505, transparent 400px);
}

/* HEADER BASEADO NO SITE */
header {
    height: 80px;
    background: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(10px);
    color: white;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 40px;
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
    z-index: 1000;
}

.logo { display: flex; align-items: center; gap: 15px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
.logo img { height: 40px; }

.top { display: flex; align-items: center; gap: 20px; }

.badge {
    background: linear-gradient(90deg, var(--primary), #8b121d);
    padding: 6px 14px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 700;
}

.avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid var(--gold);
}

/* LAYOUT */
.layout { display: flex; min-height: calc(100vh - 80px); }

/* SIDEBAR PREMIUM */
aside {
    width: 260px;
    background: rgba(0, 0, 0, 0.5);
    padding: 30px 20px;
    border-right: 1px solid var(--border);
}

aside button {
    width: 100%;
    margin-bottom: 12px;
    background: transparent;
    border: 1px solid transparent;
    padding: 14px;
    color: var(--muted);
    border-radius: 8px;
    text-align: left;
    cursor: pointer;
    transition: all .3s;
    font-weight: 500;
}

aside button:hover {
    color: var(--text);
    background: rgba(255, 255, 255, 0.05);
}

aside button.active-nav {
    border-color: var(--gold);
    color: var(--gold);
    background: rgba(197, 163, 101, 0.1);
}

/* MAIN */
main { flex: 1; padding: 40px; max-width: 1200px; margin: 0 auto; }

/* DASHBOARD CARDS (ESTILO PLANOS VIRTEXT) */
.dashboard {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 25px;
    margin-top: 30px;
}

.dash-card {
    background: var(--panel);
    padding: 30px;
    border-radius: 20px;
    border: 1px solid var(--border);
    transition: transform .3s, border-color .3s;
    text-align: center;
}

.dash-card:hover {
    transform: translateY(-10px);
    border-color: var(--gold);
}

.dash-card strong { color: var(--gold); text-transform: uppercase; font-size: 14px; letter-spacing: 2px; }
.dash-card p { font-size: 48px; font-weight: 700; margin: 15px 0; }

/* CHECKLIST CARD */
.card {
    background: var(--panel);
    border-radius: 16px;
    padding: 24px;
    margin-bottom: 20px;
    border: 1px solid var(--border);
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    animation: fade .4s ease;
}

@keyframes fade { from { opacity: 0; transform: translateY(20px); } }

textarea {
    width: 100%;
    border: 1px solid #333;
    border-radius: 10px;
    padding: 12px;
    margin-top: 15px;
    background: #000;
    color: white;
    font-family: inherit;
    resize: none;
}

textarea:focus { border-color: var(--gold); outline: none; }

input[type=checkbox] {
    width: 20px;
    height: 20px;
    cursor: pointer;
    accent-color: var(--primary);
}

progress {
    width: 100%;
    height: 8px;
    accent-color: var(--gold);
    background: #222;
    border-radius: 10px;
    margin: 20px 0;
}

progress::-webkit-progress-bar { background: #222; border-radius: 10px; }
progress::-webkit-progress-value { background: var(--gold); border-radius: 10px; }

/* BUTTONS VIRTEX STYLE */
.btn {
    background: var(--primary);
    color: white;
    border: none;
    padding: 14px 28px;
    border-radius: 50px;
    cursor: pointer;
    font-weight: 700;
    text-transform: uppercase;
    font-size: 13px;
    transition: all .3s;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.btn:hover {
    background: #ff2a3b;
    box-shadow: 0 0 20px rgba(225, 29, 46, 0.4);
    transform: scale(1.02);
}

.btn-sec {
    background: transparent;
    border: 1px solid var(--gold);
    color: var(--gold);
}

/* LOGIN */
.login { 
    max-width: 400px; 
    margin: 100px auto; 
    padding: 40px; 
    background: var(--panel); 
    border-radius: 24px; 
    border: 1px solid var(--border);
}

.login input {
    padding: 15px;
    border-radius: 10px;
    border: 1px solid #333;
    width: 100%;
    background: #000;
    color: white;
    margin-bottom: 20px;
}

/* VIEWS */
.view { display: none; }
.view.active { display: block; }

@media(max-width: 800px) {
    aside { display: none; }
    header { padding: 0 20px; }
    main { padding: 20px; }
}
</style>
</head>

<body>

<header>
    <div class="logo">
        <img src="icon.png" alt="VirteX Icon"> <span>VirteX <span style="color:var(--gold)">Premium</span></span>
    </div>

    <div class="top">
        <span id="user" style="font-weight: 600;"></span>
        <span class="badge" id="count">0</span>
        <img id="avatarTop" class="avatar" src="https://ui-avatars.com/api/?background=c5a365&color=fff">
        <button class="btn btn-sec" onclick="logout()" style="padding: 8px 15px;">Sair</button>
    </div>
</header>

<div class="layout">
    <aside>
        <button id="nav-dash" onclick="mostrarDashboard()" class="active-nav">Painel Inicial</button>
        <button id="nav-ME" onclick="abrir('ME')">Mudan√ßa de Endere√ßo</button>
        <button id="nav-PL" onclick="abrir('PL')">Atualiza√ß√£o de Plano</button>
    </aside>

    <main>
        <div id="login" class="view active login">
            <h2 style="color: var(--gold)">Descubra o Poder de ser <span style="color: var(--primary)">Premium</span></h2>
            <p style="color: var(--muted)">Acesse seu sistema de protocolos</p>
            <input id="username" placeholder="Seu nome de usu√°rio">
            <button class="btn" style="width: 100%" onclick="entrar()">Acessar Agora</button>
        </div>

        <div id="dashboard" class="view">
            <h2 style="font-size: 32px;">Ol√°, <span id="dashUser" style="color: var(--gold)"></span> üëã</h2>
            <p style="color: var(--muted)">Bem-vindo ao centro de opera√ß√µes VirteX.</p>

            <div class="dashboard">
                <div class="dash-card">
                    <strong>Atendimentos Realizados</strong>
                    <p id="dashCount">0</p>
                    <small style="color: var(--muted)">Sincronizado com LocalStorage</small>
                </div>

                <div class="dash-card">
                    <strong>Status do Sistema</strong>
                    <p style="font-size: 24px; color: #2ecc71;">Online</p>
                    <div class="profile-upload" style="margin-top: 15px;">
                        <label class="btn btn-sec" style="font-size: 11px;">
                            Trocar Foto
                            <input type="file" hidden accept="image/*" onchange="uploadFoto(event)">
                        </label>
                    </div>
                </div>
            </div>

            <h3 style="margin-top: 40px; color: var(--gold)">Novos Protocolos</h3>
            <div style="display: flex; gap: 15px;">
                <button class="btn" onclick="abrir('ME')">Mudan√ßa de Endere√ßo</button>
                <button class="btn btn-sec" onclick="abrir('PL')">Atualiza√ß√£o de Plano</button>
            </div>
        </div>

        <div id="app" class="view">
            <div class="actions">
                <button class="btn btn-sec" onclick="mostrarDashboard()">‚Üê Voltar</button>
                <button class="btn" style="background: #333;" onclick="resetar()">Reiniciar</button>
            </div>

            <h2 id="titulo" style="font-size: 28px; margin: 20px 0 10px 0;"></h2>
            
            <div style="background: var(--panel); padding: 20px; border-radius: 12px; border-left: 4px solid var(--gold);">
                <div style="display: flex; justify-content: space-between; font-weight: 600; margin-bottom: 5px;">
                    <span>Progresso do Atendimento</span>
                    <span id="pct" style="color: var(--gold)">0%</span>
                </div>
                <progress id="progress" value="0"></progress>
            </div>

            <div id="lista" style="margin-top: 30px;"></div>

            <div style="margin-top: 40px; border-top: 1px solid var(--border); padding-top: 20px;">
                <button class="btn" style="width: 100%" onclick="exportar()">Finalizar e Gerar Relat√≥rio PDF</button>
            </div>
        </div>

    </main>
</div>

<script>
// L√≥gica mantida conforme seu c√≥digo original, com ajustes de interface
let atual="";
const dados={
    ME:[
        "Informar sobre custo/isen√ß√£o, pedir para levar equipamento e informar SLA",
        "Filtrar novo endere√ßo",
        "Verificar documentos",
        "Verificar se pode ser isento",
        "Abrir ME no ERP",
        "Verificar atualiza√ß√£o de plano",
        "Gerar contrato",
        "Abrir renova√ß√£o",
        "Encaminhar CS"
    ],
    PL:[
        "Informar processo e benef√≠cios",
        "Verificar documenta√ß√£o e faturas",
        "Abrir atualiza√ß√£o no ERP",
        "Conferir informa√ß√µes em sistema",
        "Enviar v√≠deo ao cliente",
        "Gerar contrato",
        "Abrir renova√ß√£o ap√≥s assinatura",
        "Encerrar renova√ß√£o"
    ]
};

function entrar(){
    const nameInput = document.getElementById("username").value;
    if(!nameInput) return;
    localStorage.setItem("user", nameInput);
    mostrarDashboard();
}

function mostrarDashboard(){
    document.querySelectorAll(".view").forEach(v=>v.classList.remove("active"));
    document.querySelectorAll("aside button").forEach(b=>b.classList.remove("active-nav"));
    
    document.getElementById("login").classList.remove("active");
    document.getElementById("dashboard").classList.add("active");
    document.getElementById("nav-dash").classList.add("active-nav");

    const userVal = localStorage.getItem("user");
    if(!userVal) {
        document.getElementById("login").classList.add("active");
        document.getElementById("dashboard").classList.remove("active");
        return;
    }

    document.getElementById("user").innerText = userVal;
    document.getElementById("dashUser").innerText = userVal;
    document.getElementById("dashCount").innerText = localStorage.getItem("count")||0;
    document.getElementById("count").innerText = localStorage.getItem("count")||0;

    const foto = localStorage.getItem("foto");
    if(foto){
        document.getElementById("avatarTop").src = foto;
        document.getElementById("avatarDash").src = foto;
    }
}

function abrir(t){
    atual = t;
    document.querySelectorAll(".view").forEach(v=>v.classList.remove("active"));
    document.querySelectorAll("aside button").forEach(b=>b.classList.remove("active-nav"));
    
    document.getElementById("app").classList.add("active");
    document.getElementById("nav-" + t).classList.add("active-nav");

    let c = parseInt(localStorage.getItem("count")||0)+1;
    localStorage.setItem("count", c);
    document.getElementById("count").innerText = c;

    document.getElementById("titulo").innerText = t=="ME"?"Mudan√ßa de Endere√ßo":"Atualiza√ß√£o de Plano";
    const lista = document.getElementById("lista");
    lista.innerHTML = "";
    document.getElementById("progress").max = dados[t].length;

    dados[t].forEach(x => {
        lista.innerHTML += `
            <div class="card">
                <label style="display: flex; gap: 15px; align-items: center; cursor: pointer;">
                    <input type="checkbox" onchange="salvar()"> 
                    <span style="font-weight: 600; font-size: 16px;">${x}</span>
                </label>
                <textarea placeholder="Adicione notas internas para este item..." oninput="salvar()"></textarea>
            </div>`;
    });

    carregar();
}

function salvar(){
    const c = [...document.querySelectorAll("input[type=checkbox]")].map(x=>x.checked);
    const t = [...document.querySelectorAll("textarea")].map(x=>x.value);
    localStorage.setItem("check_"+atual, JSON.stringify({c,t}));
    atualizar();
}

function carregar(){
    let d = JSON.parse(localStorage.getItem("check_"+atual));
    if(!d) {
        atualizar();
        return;
    }
    document.querySelectorAll("input[type=checkbox]").forEach((x,i)=>x.checked = d.c[i]);
    document.querySelectorAll("textarea").forEach((x,i)=>x.value = d.t[i]);
    atualizar();
}

function atualizar(){
    let inputs = document.querySelectorAll("input[type=checkbox]");
    let total = inputs.length;
    let ok = [...inputs].filter(x=>x.checked).length;
    document.getElementById("progress").value = ok;
    document.getElementById("pct").innerText = Math.round(ok/total*100) + "% Conclu√≠do";
}

function resetar(){
    if(confirm("Deseja realmente reiniciar este checklist?")) {
        localStorage.removeItem("check_"+atual);
        abrir(atual);
    }
}

function exportar(){ window.print(); }

function logout(){
    localStorage.removeItem("user");
    location.reload();
}

function uploadFoto(e){
    const file = e.target.files[0];
    const reader = new FileReader();
    reader.onload = () => {
        localStorage.setItem("foto", reader.result);
        document.getElementById("avatarTop").src = reader.result;
        document.getElementById("avatarDash").src = reader.result;
    };
    reader.readAsDataURL(file);
}

// Check login inicial
if(localStorage.getItem("user")) mostrarDashboard();
</script>

</body>
</html>
